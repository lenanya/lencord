#:import Message Widgets.message.Message

# dont look at this youll just regret it
<Message>:
    orientation: 'horizontal'
    height: self.minimum_height
    spacing: 10
    padding: 10
    BoxLayout:
        orientation: 'horizontal'
        pos_hint: {'top': 1}
        height: msgBox.height
        width: avatar.width
        size_hint: None, None
        # TODO: add profiles
        AsyncImage:
            id: avatar
            source: root.authorAvatar
            size_hint: None, None
            size: root.width / 10, root.width / 10
            fit_mode: 'scale-down'
            pos_hint: {'top': 1}
            anim_delay: -1
            
    BoxLayout:
        id: msgBox
        orientation: 'vertical'
        pos_hint: {'top': 1}
        height: message.height + attachment.height
        Button:
            id: message
            halign: 'left'
            valign: 'top'
            text_size: root.width - avatar.width, None
            size: self.texture_size
            size_hint: None, None
            text: root.reply + root.author + ":\n" + root.text
            on_press: root.setReply()
            background_normal: ''
            background_color: root.backgroundColor
        AsyncImage:
            id: attachment
            height: root.imageHeight
            source: root.attachmentLink
            size_hint: None, None
            width: root.width * 0.9
            fit_mode: 'scale-down'
            anim_delay: -1


# TODO: add date/time